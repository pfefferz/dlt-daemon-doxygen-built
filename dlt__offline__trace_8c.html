<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>automotive-dlt: /home/pfefferz/dlt-daemon/src/shared/dlt_offline_trace.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">automotive-dlt
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('dlt__offline__trace_8c.html','');});
</script>
<div id="doc-content">
<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">dlt_offline_trace.c File Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &lt;stdio.h&gt;</code><br />
<code>#include &lt;stdlib.h&gt;</code><br />
<code>#include &lt;string.h&gt;</code><br />
<code>#include &lt;time.h&gt;</code><br />
<code>#include &lt;sys/types.h&gt;</code><br />
<code>#include &lt;sys/stat.h&gt;</code><br />
<code>#include &lt;fcntl.h&gt;</code><br />
<code>#include &lt;unistd.h&gt;</code><br />
<code>#include &lt;dirent.h&gt;</code><br />
<code>#include &lt;syslog.h&gt;</code><br />
<code>#include &lt;<a class="el" href="dlt__offline__trace_8h_source.html">dlt_offline_trace.h</a>&gt;</code><br />
<code>#include &quot;<a class="el" href="dlt__common_8h_source.html">dlt_common.h</a>&quot;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for dlt_offline_trace.c:</div>
<div class="dyncontent">
<div class="center"><img src="dlt__offline__trace_8c__incl.png" border="0" usemap="#_2home_2pfefferz_2dlt-daemon_2src_2shared_2dlt__offline__trace_8c" alt=""/></div>
<!-- MAP 0 -->
</div>
</div>
<p><a href="dlt__offline__trace_8c_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:aa23dd63c77ce1dd0d7fece23d0b26832"><td class="memItemLeft" align="right" valign="top">unsigned int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="dlt__offline__trace_8c.html#aa23dd63c77ce1dd0d7fece23d0b26832">dlt_offline_trace_storage_dir_info</a> (char *path, char *file_name, char *newest, char *oldest)</td></tr>
<tr class="separator:aa23dd63c77ce1dd0d7fece23d0b26832"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1941ca39007dde3d840169d39f6a28ed"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="dlt__offline__trace_8c.html#a1941ca39007dde3d840169d39f6a28ed">dlt_offline_trace_file_name</a> (char *log_file_name, char *name, unsigned int idx)</td></tr>
<tr class="separator:a1941ca39007dde3d840169d39f6a28ed"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a876f060e678c160b787a4fca1ac24ecc"><td class="memItemLeft" align="right" valign="top">unsigned int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="dlt__offline__trace_8c.html#a876f060e678c160b787a4fca1ac24ecc">dlt_offline_trace_get_idx_of_log_file</a> (char *file)</td></tr>
<tr class="separator:a876f060e678c160b787a4fca1ac24ecc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abb96122f2e8aa5b2b2fd56ac2f540f45"><td class="memItemLeft" align="right" valign="top"><a class="el" href="dlt__types_8h.html#a47a6e03bd6c4f27e8c1610fc2ea081be">DltReturnValue</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="dlt__offline__trace_8c.html#abb96122f2e8aa5b2b2fd56ac2f540f45">dlt_offline_trace_create_new_file</a> (<a class="el" href="struct_dlt_offline_trace.html">DltOfflineTrace</a> *trace)</td></tr>
<tr class="separator:abb96122f2e8aa5b2b2fd56ac2f540f45"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a31bce8b31e8d1e62b34b843cc59ae931"><td class="memItemLeft" align="right" valign="top">unsigned long&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="dlt__offline__trace_8c.html#a31bce8b31e8d1e62b34b843cc59ae931">dlt_offline_trace_get_total_size</a> (<a class="el" href="struct_dlt_offline_trace.html">DltOfflineTrace</a> *trace)</td></tr>
<tr class="separator:a31bce8b31e8d1e62b34b843cc59ae931"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a256642bc2618316dc9995d43a930c245"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="dlt__offline__trace_8c.html#a256642bc2618316dc9995d43a930c245">dlt_offline_trace_delete_oldest_file</a> (<a class="el" href="struct_dlt_offline_trace.html">DltOfflineTrace</a> *trace)</td></tr>
<tr class="separator:a256642bc2618316dc9995d43a930c245"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2422ffc0fee182a706aecf598ca52e18"><td class="memItemLeft" align="right" valign="top"><a class="el" href="dlt__types_8h.html#a47a6e03bd6c4f27e8c1610fc2ea081be">DltReturnValue</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="dlt__offline__trace_8c.html#a2422ffc0fee182a706aecf598ca52e18">dlt_offline_trace_check_size</a> (<a class="el" href="struct_dlt_offline_trace.html">DltOfflineTrace</a> *trace)</td></tr>
<tr class="separator:a2422ffc0fee182a706aecf598ca52e18"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a68f2ef3590c82223f12131ba2a5bf549"><td class="memItemLeft" align="right" valign="top"><a class="el" href="dlt__types_8h.html#a47a6e03bd6c4f27e8c1610fc2ea081be">DltReturnValue</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="dlt__offline__trace_8c.html#a68f2ef3590c82223f12131ba2a5bf549">dlt_offline_trace_init</a> (<a class="el" href="struct_dlt_offline_trace.html">DltOfflineTrace</a> *trace, const char *directory, int fileSize, int maxSize, int filenameTimestampBased)</td></tr>
<tr class="separator:a68f2ef3590c82223f12131ba2a5bf549"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4a1ffa4d2410e284f2889789d8a8e03e"><td class="memItemLeft" align="right" valign="top"><a class="el" href="dlt__types_8h.html#a47a6e03bd6c4f27e8c1610fc2ea081be">DltReturnValue</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="dlt__offline__trace_8c.html#a4a1ffa4d2410e284f2889789d8a8e03e">dlt_offline_trace_write</a> (<a class="el" href="struct_dlt_offline_trace.html">DltOfflineTrace</a> *trace, unsigned char *data1, int size1, unsigned char *data2, int size2, unsigned char *data3, int size3)</td></tr>
<tr class="separator:a4a1ffa4d2410e284f2889789d8a8e03e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a51b3c6a87b7a65198b295abfb7434791"><td class="memItemLeft" align="right" valign="top"><a class="el" href="dlt__types_8h.html#a47a6e03bd6c4f27e8c1610fc2ea081be">DltReturnValue</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="dlt__offline__trace_8c.html#a51b3c6a87b7a65198b295abfb7434791">dlt_offline_trace_free</a> (<a class="el" href="struct_dlt_offline_trace.html">DltOfflineTrace</a> *trace)</td></tr>
<tr class="separator:a51b3c6a87b7a65198b295abfb7434791"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><dl class="section author"><dt>Author</dt><dd>Alexander Wenzel <a href="#" onclick="location.href='mai'+'lto:'+'ale'+'xa'+'nde'+'r.'+'aw.'+'we'+'nze'+'l@'+'bmw'+'.d'+'e'; return false;">alexa<span style="display: none;">.nosp@m.</span>nder<span style="display: none;">.nosp@m.</span>.aw.w<span style="display: none;">.nosp@m.</span>enze<span style="display: none;">.nosp@m.</span>l@bmw<span style="display: none;">.nosp@m.</span>.de</a></dd></dl>
<dl class="section copyright"><dt>Copyright</dt><dd>Copyright Â© 2011-2015 BMW AG. <br />
License MPL-2.0: Mozilla Public License version 2.0 <a href="http://mozilla.org/MPL/2.0/">http://mozilla.org/MPL/2.0/</a>. </dd></dl>

<p>Definition in file <a class="el" href="dlt__offline__trace_8c_source.html">dlt_offline_trace.c</a>.</p>
</div><h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="a2422ffc0fee182a706aecf598ca52e18"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="dlt__types_8h.html#a47a6e03bd6c4f27e8c1610fc2ea081be">DltReturnValue</a> dlt_offline_trace_check_size </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_dlt_offline_trace.html">DltOfflineTrace</a> *&#160;</td>
          <td class="paramname"><em>trace</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="dlt__offline__trace_8c_source.html#l00354">354</a> of file <a class="el" href="dlt__offline__trace_8c_source.html">dlt_offline_trace.c</a>.</p>

<p>References <a class="el" href="dlt__offline__trace_8h_source.html#l00077">DltOfflineTrace::directory</a>, <a class="el" href="dlt__offline__trace_8c_source.html#l00301">dlt_offline_trace_delete_oldest_file()</a>, <a class="el" href="dlt__offline__trace_8c_source.html#l00264">dlt_offline_trace_get_total_size()</a>, <a class="el" href="dlt__types_8h_source.html#l00094">DLT_RETURN_ERROR</a>, <a class="el" href="dlt__types_8h_source.html#l00095">DLT_RETURN_OK</a>, <a class="el" href="dlt__common_8c_source.html#l02078">dlt_vlog()</a>, <a class="el" href="dlt__offline__trace_8h_source.html#l00079">DltOfflineTrace::fileSize</a>, and <a class="el" href="dlt__offline__trace_8h_source.html#l00080">DltOfflineTrace::maxSize</a>.</p>

<p>Referenced by <a class="el" href="dlt__offline__trace_8c_source.html#l00384">dlt_offline_trace_init()</a>, and <a class="el" href="dlt__offline__trace_8c_source.html#l00398">dlt_offline_trace_write()</a>.</p>

</div>
</div>
<a class="anchor" id="abb96122f2e8aa5b2b2fd56ac2f540f45"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="dlt__types_8h.html#a47a6e03bd6c4f27e8c1610fc2ea081be">DltReturnValue</a> dlt_offline_trace_create_new_file </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_dlt_offline_trace.html">DltOfflineTrace</a> *&#160;</td>
          <td class="paramname"><em>trace</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="dlt__offline__trace_8c_source.html#l00208">208</a> of file <a class="el" href="dlt__offline__trace_8c_source.html">dlt_offline_trace.c</a>.</p>

<p>References <a class="el" href="dlt__offline__trace_8h_source.html#l00077">DltOfflineTrace::directory</a>, <a class="el" href="dlt__offline__trace_8c_source.html#l00168">dlt_offline_trace_file_name()</a>, <a class="el" href="dlt__offline__trace_8c_source.html#l00181">dlt_offline_trace_get_idx_of_log_file()</a>, <a class="el" href="dlt__offline__trace_8c_source.html#l00070">dlt_offline_trace_storage_dir_info()</a>, <a class="el" href="dlt__offline__trace_8h_source.html#l00064">DLT_OFFLINETRACE_FILENAME_BASE</a>, <a class="el" href="dlt__offline__trace_8h_source.html#l00070">DLT_OFFLINETRACE_FILENAME_MAX_SIZE</a>, <a class="el" href="dlt__types_8h_source.html#l00094">DLT_RETURN_ERROR</a>, <a class="el" href="dlt__types_8h_source.html#l00095">DLT_RETURN_OK</a>, <a class="el" href="dlt__offline__trace_8h_source.html#l00078">DltOfflineTrace::filename</a>, <a class="el" href="dlt__offline__trace_8h_source.html#l00081">DltOfflineTrace::filenameTimestampBased</a>, <a class="el" href="dlt__common_8h_source.html#l00232">NULL</a>, and <a class="el" href="dlt__offline__trace_8h_source.html#l00082">DltOfflineTrace::ohandle</a>.</p>

<p>Referenced by <a class="el" href="dlt__offline__trace_8c_source.html#l00384">dlt_offline_trace_init()</a>, and <a class="el" href="dlt__offline__trace_8c_source.html#l00398">dlt_offline_trace_write()</a>.</p>

</div>
</div>
<a class="anchor" id="a256642bc2618316dc9995d43a930c245"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int dlt_offline_trace_delete_oldest_file </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_dlt_offline_trace.html">DltOfflineTrace</a> *&#160;</td>
          <td class="paramname"><em>trace</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="dlt__offline__trace_8c_source.html#l00301">301</a> of file <a class="el" href="dlt__offline__trace_8c_source.html">dlt_offline_trace.c</a>.</p>

<p>References <a class="el" href="dlt__offline__trace_8h_source.html#l00077">DltOfflineTrace::directory</a>, <a class="el" href="dlt__offline__trace_8h_source.html#l00068">DLT_OFFLINETRACE_FILENAME_TO_COMPARE</a>, and <a class="el" href="dlt__common_8h_source.html#l00232">NULL</a>.</p>

<p>Referenced by <a class="el" href="dlt__offline__trace_8c_source.html#l00354">dlt_offline_trace_check_size()</a>.</p>

</div>
</div>
<a class="anchor" id="a1941ca39007dde3d840169d39f6a28ed"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void dlt_offline_trace_file_name </td>
          <td>(</td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>log_file_name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>idx</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>creates filename with index </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">log</td><td>file name created with index </td></tr>
    <tr><td class="paramname">filename</td><td>base </td></tr>
    <tr><td class="paramname">index</td><td>to be used for file name creation </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="dlt__offline__trace_8c_source.html#l00168">168</a> of file <a class="el" href="dlt__offline__trace_8c_source.html">dlt_offline_trace.c</a>.</p>

<p>References <a class="el" href="dlt__offline__trace_8h_source.html#l00064">DLT_OFFLINETRACE_FILENAME_BASE</a>, <a class="el" href="dlt__offline__trace_8h_source.html#l00065">DLT_OFFLINETRACE_FILENAME_DELI</a>, <a class="el" href="dlt__offline__trace_8h_source.html#l00066">DLT_OFFLINETRACE_FILENAME_EXT</a>, and <a class="el" href="dlt__offline__trace_8h_source.html#l00070">DLT_OFFLINETRACE_FILENAME_MAX_SIZE</a>.</p>

<p>Referenced by <a class="el" href="dlt__offline__trace_8c_source.html#l00208">dlt_offline_trace_create_new_file()</a>.</p>

</div>
</div>
<a class="anchor" id="a51b3c6a87b7a65198b295abfb7434791"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="dlt__types_8h.html#a47a6e03bd6c4f27e8c1610fc2ea081be">DltReturnValue</a> dlt_offline_trace_free </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_dlt_offline_trace.html">DltOfflineTrace</a> *&#160;</td>
          <td class="paramname"><em>buf</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Uninitialise the offline trace This function call closes currently used log file. This function must be called after usage of offline trace </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">trace</td><td>pointer to offline trace structure </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>negative value if there was an error </dd></dl>

<p>Definition at line <a class="el" href="dlt__offline__trace_8c_source.html#l00440">440</a> of file <a class="el" href="dlt__offline__trace_8c_source.html">dlt_offline_trace.c</a>.</p>

<p>References <a class="el" href="dlt__types_8h_source.html#l00094">DLT_RETURN_ERROR</a>, <a class="el" href="dlt__types_8h_source.html#l00095">DLT_RETURN_OK</a>, and <a class="el" href="dlt__offline__trace_8h_source.html#l00082">DltOfflineTrace::ohandle</a>.</p>

<p>Referenced by <a class="el" href="dlt-daemon_8c_source.html#l01200">dlt_daemon_local_cleanup()</a>.</p>

</div>
</div>
<a class="anchor" id="a876f060e678c160b787a4fca1ac24ecc"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">unsigned int dlt_offline_trace_get_idx_of_log_file </td>
          <td>(</td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>file</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>generates index for log file name </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">filename</td><td>supplied to create index </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>the index to be used for log file name </dd></dl>

<p>Definition at line <a class="el" href="dlt__offline__trace_8c_source.html#l00181">181</a> of file <a class="el" href="dlt__offline__trace_8c_source.html">dlt_offline_trace.c</a>.</p>

<p>References <a class="el" href="dlt__common_8h_source.html#l00232">NULL</a>.</p>

<p>Referenced by <a class="el" href="dlt__offline__trace_8c_source.html#l00208">dlt_offline_trace_create_new_file()</a>.</p>

</div>
</div>
<a class="anchor" id="a31bce8b31e8d1e62b34b843cc59ae931"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">unsigned long dlt_offline_trace_get_total_size </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_dlt_offline_trace.html">DltOfflineTrace</a> *&#160;</td>
          <td class="paramname"><em>trace</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Get size of currently used offline trace buffer </p><dl class="section return"><dt>Returns</dt><dd>size in bytes </dd></dl>

<p>Definition at line <a class="el" href="dlt__offline__trace_8c_source.html#l00264">264</a> of file <a class="el" href="dlt__offline__trace_8c_source.html">dlt_offline_trace.c</a>.</p>

<p>References <a class="el" href="dlt__offline__trace_8h_source.html#l00077">DltOfflineTrace::directory</a>, <a class="el" href="dlt__offline__trace_8h_source.html#l00064">DLT_OFFLINETRACE_FILENAME_BASE</a>, and <a class="el" href="dlt__common_8h_source.html#l00232">NULL</a>.</p>

<p>Referenced by <a class="el" href="dlt__offline__trace_8c_source.html#l00354">dlt_offline_trace_check_size()</a>.</p>

</div>
</div>
<a class="anchor" id="a68f2ef3590c82223f12131ba2a5bf549"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="dlt__types_8h.html#a47a6e03bd6c4f27e8c1610fc2ea081be">DltReturnValue</a> dlt_offline_trace_init </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_dlt_offline_trace.html">DltOfflineTrace</a> *&#160;</td>
          <td class="paramname"><em>trace</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>directory</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>fileSize</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>maxSize</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>filenameTimestampBased</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Initialise the offline trace This function call opens the currently used log file. A check of the complete size of the offline trace is done during startup. Old files are deleted, if there is not enough space left to create new file. This function must be called before using further offline trace functions. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">trace</td><td>pointer to offline trace structure </td></tr>
    <tr><td class="paramname">directory</td><td>directory where to store offline trace files </td></tr>
    <tr><td class="paramname">fileSize</td><td>maximum size of one offline trace file. </td></tr>
    <tr><td class="paramname">maxSize</td><td>maximum size of complete offline trace in bytes. .</td></tr>
    <tr><td class="paramname">filenameTimestampBased</td><td>filename to be created on timestamp based or index based </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>negative value if there was an error </dd></dl>

<p>Definition at line <a class="el" href="dlt__offline__trace_8c_source.html#l00384">384</a> of file <a class="el" href="dlt__offline__trace_8c_source.html">dlt_offline_trace.c</a>.</p>

<p>References <a class="el" href="dlt__offline__trace_8h_source.html#l00077">DltOfflineTrace::directory</a>, <a class="el" href="dlt__offline__trace_8c_source.html#l00354">dlt_offline_trace_check_size()</a>, <a class="el" href="dlt__offline__trace_8c_source.html#l00208">dlt_offline_trace_create_new_file()</a>, <a class="el" href="dlt__offline__trace_8h_source.html#l00081">DltOfflineTrace::filenameTimestampBased</a>, <a class="el" href="dlt__offline__trace_8h_source.html#l00079">DltOfflineTrace::fileSize</a>, and <a class="el" href="dlt__offline__trace_8h_source.html#l00080">DltOfflineTrace::maxSize</a>.</p>

<p>Referenced by <a class="el" href="dlt-daemon_8c_source.html#l00823">dlt_daemon_local_init_p2()</a>.</p>

</div>
</div>
<a class="anchor" id="aa23dd63c77ce1dd0d7fece23d0b26832"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">unsigned int dlt_offline_trace_storage_dir_info </td>
          <td>(</td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>path</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>file_name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>newest</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>oldest</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Provides info about the offline logs storage directory </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">path</td><td>of the storage directory </td></tr>
    <tr><td class="paramname">filename</td><td>to search for </td></tr>
    <tr><td class="paramname">pointer</td><td>to store newest filename </td></tr>
    <tr><td class="paramname">pointer</td><td>to store oldest filename </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>num of files in the directory </dd></dl>

<p>Definition at line <a class="el" href="dlt__offline__trace_8c_source.html#l00070">70</a> of file <a class="el" href="dlt__offline__trace_8c_source.html">dlt_offline_trace.c</a>.</p>

<p>References <a class="el" href="dlt__offline__trace_8h_source.html#l00070">DLT_OFFLINETRACE_FILENAME_MAX_SIZE</a>, and <a class="el" href="dlt__common_8h_source.html#l00232">NULL</a>.</p>

<p>Referenced by <a class="el" href="dlt__offline__trace_8c_source.html#l00208">dlt_offline_trace_create_new_file()</a>.</p>

</div>
</div>
<a class="anchor" id="a4a1ffa4d2410e284f2889789d8a8e03e"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="dlt__types_8h.html#a47a6e03bd6c4f27e8c1610fc2ea081be">DltReturnValue</a> dlt_offline_trace_write </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_dlt_offline_trace.html">DltOfflineTrace</a> *&#160;</td>
          <td class="paramname"><em>trace</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned char *&#160;</td>
          <td class="paramname"><em>data1</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>size1</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned char *&#160;</td>
          <td class="paramname"><em>data2</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>size2</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned char *&#160;</td>
          <td class="paramname"><em>data3</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>size3</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Write data into offline trace If the current used log file exceeds the max file size, new log file is created. A check of the complete size of the offline trace is done before new file is created. Old files are deleted, if there is not enough space left to create new file. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">trace</td><td>pointer to offline trace structure </td></tr>
    <tr><td class="paramname">data1</td><td>pointer to first data block to be written, null if not used </td></tr>
    <tr><td class="paramname">size1</td><td>size in bytes of first data block to be written, 0 if not used </td></tr>
    <tr><td class="paramname">data2</td><td>pointer to second data block to be written, null if not used </td></tr>
    <tr><td class="paramname">size2</td><td>size in bytes of second data block to be written, 0 if not used </td></tr>
    <tr><td class="paramname">data3</td><td>pointer to third data block to be written, null if not used </td></tr>
    <tr><td class="paramname">size3</td><td>size in bytes of third data block to be written, 0 if not used </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>negative value if there was an error </dd></dl>

<p>Definition at line <a class="el" href="dlt__offline__trace_8c_source.html#l00398">398</a> of file <a class="el" href="dlt__offline__trace_8c_source.html">dlt_offline_trace.c</a>.</p>

<p>References <a class="el" href="dlt__offline__trace_8c_source.html#l00354">dlt_offline_trace_check_size()</a>, <a class="el" href="dlt__offline__trace_8c_source.html#l00208">dlt_offline_trace_create_new_file()</a>, <a class="el" href="dlt__types_8h_source.html#l00094">DLT_RETURN_ERROR</a>, <a class="el" href="dlt__types_8h_source.html#l00095">DLT_RETURN_OK</a>, <a class="el" href="dlt__offline__trace_8h_source.html#l00079">DltOfflineTrace::fileSize</a>, and <a class="el" href="dlt__offline__trace_8h_source.html#l00082">DltOfflineTrace::ohandle</a>.</p>

<p>Referenced by <a class="el" href="dlt__daemon__client_8c_source.html#l00225">dlt_daemon_client_send()</a>, and <a class="el" href="dlt-daemon_8c_source.html#l02618">dlt_daemon_process_user_message_log()</a>.</p>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_68267d1309a1af8e8297ef4c3efbcdba.html">src</a></li><li class="navelem"><a class="el" href="dir_4f38db07240614f25134cb9a8bebbaf9.html">shared</a></li><li class="navelem"><a class="el" href="dlt__offline__trace_8c.html">dlt_offline_trace.c</a></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.11 </li>
  </ul>
</div>
</body>
</html>
